<?php
/** @var \Illuminate\Database\Eloquent\Factory $factory */
// --------------------------------------------------------------------------
use Carbon\Carbon;
use Faker\Factory as Faker;
// --------------------------------------------------------------------------
use App\Models\OtherAdditionalQaCheck;
use App\Models\OtherAdditionalQaCategory;
// --------------------------------------------------------------------------


// --------------------------------------------------------------------------
// Generate dummy category
// --------------------------------------------------------------------------
$factory->define( App\Models\OtherAdditionalQaCategory::class, function(){
    // ----------------------------------------------------------------------
    $result = new \stdClass;
    $faker = Faker::create('ja_JP');
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    $result             = new \stdClass;
    $result->name       = $faker->word();
    $result->order      = 1;
    // ----------------------------------------------------------------------
    $result->created_at = Carbon::now();
    $result->updated_at = Carbon::now();
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Return the result
    // ----------------------------------------------------------------------
    return (array) $result;
    // ----------------------------------------------------------------------
});
// --------------------------------------------------------------------------


// --------------------------------------------------------------------------
// Generate dummy question
// --------------------------------------------------------------------------
$factory->define( App\Models\OtherAdditionalQaCheck::class, function(){
    // ----------------------------------------------------------------------
    $result = new \stdClass;
    $faker = Faker::create('ja_JP');
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Get random category
    // ----------------------------------------------------------------------
    $category = OtherAdditionalQaCategory::all()->random()->id;
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Get input types from config
    // ----------------------------------------------------------------------
    $types = config('const.QA_INPUT_TYPES');
    $type = array_rand( $types );
    // ----------------------------------------------------------------------
    // Dummy radio options
    // ----------------------------------------------------------------------
    $radios = array(
        array( 'ある', 'なし' ), // Yes, No
        array( 'ある', 'なし', 'ほぼなし', '不明' ), // Yes, No, Almost None, Unknown
        array( '左側', '右側', '両側' ), // Left, Right, Both
        array( '居住の', 'ホテル', '別荘' ) // Residential, Hotel, Villa
    );
    // ----------------------------------------------------------------------
    // Dummy checkbox options
    // ----------------------------------------------------------------------
    $checkboxes = array(
        array( '空気', '電気', '道路', 'インターネット' ), // Water, Power, Road, Internet
        array( '病院', '空港', '警察署', '公園'), // Hospital, Airport, Police Station, Park
        array( '高速道路', '地下鉄', 'バス停', '自転車レンタル' ), // Highway, Metro, Bus Station, Bike Rental
        array( '駐車場', '湯沸かし器', '温泉' ) // Parking Lot, Water Heater, Onsen
    );
    // ----------------------------------------------------------------------
    $options = null;
    if( 1 == $type ) $options = json_encode( $radios[ array_rand( $radios )], JSON_UNESCAPED_UNICODE );
    elseif( 2 == $type ) $options = json_encode( $checkboxes[ array_rand( $checkboxes )], JSON_UNESCAPED_UNICODE );
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    $result              = new \stdClass;
    $result->category_id = $category;
    $result->question    = $faker->sentence();
    $result->input_type  = $type;
    $result->choices     = $options;
    $result->status      = 1;
    $result->order       = 1;
    // ----------------------------------------------------------------------
    $result->created_at  = Carbon::now();
    $result->updated_at  = Carbon::now();
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Return the result
    // ----------------------------------------------------------------------
    return (array) $result;
    // ----------------------------------------------------------------------
});
// --------------------------------------------------------------------------


// --------------------------------------------------------------------------
// Generate dummy answer
// --------------------------------------------------------------------------
$factory->define( App\Models\PjAdditionalQa::class, function(){
    // ----------------------------------------------------------------------
    $result = new \stdClass;
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Get random question
    // ----------------------------------------------------------------------
    $question = OtherAdditionalQaCheck::all()->random()->id;
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    $result              = new \stdClass;
    $result->project_id  = 1;
    $result->question_id = $question;
    $result->answer      = null;
    // ----------------------------------------------------------------------
    $result->created_at  = Carbon::now();
    $result->updated_at  = Carbon::now();
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Return the result
    // ----------------------------------------------------------------------
    return (array) $result;
    // ----------------------------------------------------------------------
});
// --------------------------------------------------------------------------


// --------------------------------------------------------------------------
// Create empty answer
// --------------------------------------------------------------------------
$factory->state( App\Models\PjAdditionalQa::class, 'init', function(){
    // ----------------------------------------------------------------------
    $result = new \stdClass;
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    $result              = new \stdClass;
    $result->project_id  = 1;
    $result->question_id = 1;
    $result->answer      = null;
    // ----------------------------------------------------------------------
    $result->created_at  = Carbon::now();
    $result->updated_at  = Carbon::now();
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Return the result
    // ----------------------------------------------------------------------
    return (array) $result;
    // ----------------------------------------------------------------------
});
// --------------------------------------------------------------------------
