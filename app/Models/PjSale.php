<?php
// --------------------------------------------------------------------------
namespace App\Models;
use Illuminate\Database\Eloquent\Model;
// --------------------------------------------------------------------------
use App\Models\PjSheet as Sheet;
use App\Models\PjSalePlan as Plan;
use App\Models\PjSaleCalculator as Calculator;
// --------------------------------------------------------------------------

// --------------------------------------------------------------------------
class PjSale extends Model {
    // ----------------------------------------------------------------------
    protected $table = 'pj_sales';
    protected $guarded = [ 'id' ];
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Project sheet where the sale belongs to
    // ----------------------------------------------------------------------
    public function sheet(){
        return $this->belongsTo( Sheet::class );
    }
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Project sale calculators
    // ----------------------------------------------------------------------
    public function calculators(){
        return $this->hasMany( Calculator::class );
    }
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Project sale plans
    // ----------------------------------------------------------------------
    public function plans(){
        return $this->hasMany( Plan::class )->orderBy( 'tab_index', 'asc' );
    }
    // ----------------------------------------------------------------------
}
